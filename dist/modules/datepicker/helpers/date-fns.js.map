{"version":3,"file":"date-fns.js","sourceRoot":"","sources":["../../../../src/modules/datepicker/helpers/date-fns.ts"],"names":[],"mappings":";;;;;;;;AACA,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,UAAU,CAAC;AACzC,OAAO,KAAK,aAAa,MAAM,uBAAuB,CAAC;AAyBvD,yBAAyB,MAA2B,EAAE,WAAkB;IACpE,MAAM,CAAC,UAAC,UAAU,EAAE,EAAgC;YAA9B,wDAAI;QAA+B,OAAA,MAAM,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC;IAAxB,CAAwB,CAAC;AACtF,CAAC;AAED,8BAA8B,MAA2B,EAAE,WAAkB;IACzE,MAAM,CAAC,UAAC,EAAgC;YAA9B,wDAAI;QAA+B,OAAA,MAAM,CAAC,IAAI,CAAC;IAAZ,CAAY,CAAC;AAC9D,CAAC;AAED,sBAAsB,QAA6B,EAAE,WAAkB;IACnE,MAAM,CAAC,UAAC,WAAW,EAAE,EAAgC;YAA9B,wDAAI;QACvB,OAAA,WAAW,CAAC,KAAK,CAAC,OAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,MAAG,CAAC;IAAnD,CAAmD,CAAC;AAC5D,CAAC;AAED,sBAAsB,QAA6B,EAAE,WAAkB;IACnE,MAAM,CAAC,UAAC,EAAU,EAAE,EAAgC;YAAzC,cAAM;YAAK,wDAAI;QACtB,OAAA,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,WAAW,CAAC,CAAC;aACpC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,MAAM,CAAC,MAAI,CAAG,CAAC,EAAnB,CAAmB,CAAC;aAC7B,SAAS,CAAC,UAAA,OAAO,IAAI,OAAA,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAApB,CAAoB,CAAC;IAF/C,CAE+C,CAAC;AACxD,CAAC;AAED;IAWI,uBAAY,MAA8B;QACtC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,cAAqC,CAAC;QAElE,IAAM,aAAa,GAAG;YAClB,IAAI,EAAE,MAAM,CAAC,QAAQ;YACrB,KAAK,EAAE,MAAM,CAAC,aAAa;YAC3B,MAAM,EAAE,MAAM,CAAC,cAAc;SAChC,CAAC;QAEF,IAAM,WAAW,GAAG;YAChB,IAAI,EAAE,MAAM,CAAC,MAAM;YACnB,KAAK,EAAE,MAAM,CAAC,WAAW;SAC5B,CAAC;QAEF,IAAI,CAAC,OAAO,GAAG,aAAoB,CAAC;QACpC,IAAI,CAAC,OAAO,CAAC,QAAQ,gBACd,IAAI,CAAC,OAAO,CAAC,QAAQ,EACrB;YACC,OAAO,EAAE,eAAe,CAAC,aAAa,EAAE,MAAM,CAAC;YAC/C,QAAQ,EAAE,oBAAoB,CAAC,aAAa,EAAE,MAAM,CAAC;YACrD,KAAK,EAAE,eAAe,CAAC,WAAW,EAAE,MAAM,CAAC;YAC3C,MAAM,EAAE,oBAAoB,CAAC,WAAW,EAAE,MAAM,CAAC;SACpD,CACJ,CAAC;QACF,IAAI,CAAC,OAAO,CAAC,KAAK,gBACX,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB;YACC,QAAQ,EAAE,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC;YAC7C,OAAO,EAAE,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC;YAC5C,MAAM,EAAE,YAAY,CAAC,WAAW,EAAE,MAAM,CAAC;YACzC,KAAK,EAAE,YAAY,CAAC,WAAW,EAAE,MAAM,CAAC;SAC3C,CACJ,CAAC;IACN,CAAC;IAxCD,sBAAY,kCAAO;aAAnB;YACI,MAAM,CAAC;gBACH,YAAY,EAAE,IAAI,CAAC,aAAa;gBAChC,MAAM,EAAE,IAAI,CAAC,OAAO;aACvB,CAAC;QACN,CAAC;;;OAAA;IAqCM,8BAAM,GAAb,UAAc,CAAM,EAAE,CAAQ;QAC1B,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACtC,CAAC;IAEM,6BAAK,GAAZ,UAAa,EAAS,EAAE,CAAQ,EAAE,EAAO;QACrC,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IAC1C,CAAC;IACL,oBAAC;AAAD,CAAC,AArDD,IAqDC","sourcesContent":["import { IDatepickerLocaleValues } from \"../../../behaviors/localization\";\nimport { format, parse } from \"date-fns\";\nimport * as defaultLocale from \"date-fns/locale/en-US\";\n\ninterface IDateFnsLocaleValues { [name:string]:string[]; }\ninterface IDateFnsHelperOptions { type?:string; }\ntype DateFnsHelper<U, T> = (value:U, options:IDateFnsHelperOptions) => T;\ntype DateFnsWeekStartsOn = 0 | 1 | 2 | 3 | 4 | 5 | 6;\n\ninterface IDateFnsCustomLocale {\n    localize:{\n        weekday:DateFnsHelper<number, string>;\n        weekdays:DateFnsHelper<IDateFnsHelperOptions, string[]>;\n        month:DateFnsHelper<number, string>;\n        months:DateFnsHelper<IDateFnsHelperOptions, string[]>;\n    };\n    match:{\n        weekdays:DateFnsHelper<string, RegExpMatchArray | null>;\n        weekday?:DateFnsHelper<RegExpMatchArray, number>;\n        months:DateFnsHelper<string, RegExpMatchArray | null>;\n        month?:DateFnsHelper<RegExpMatchArray, number>;\n    };\n    options?:{\n        weekStartsOn?:number;\n    };\n}\n\nfunction buildLocalizeFn(values:IDateFnsLocaleValues, defaultType:string):DateFnsHelper<number, string> {\n    return (dirtyIndex, { type } = { type: defaultType }) => values[type][dirtyIndex];\n}\n\nfunction buildLocalizeArrayFn(values:IDateFnsLocaleValues, defaultType:string):DateFnsHelper<IDateFnsHelperOptions, string[]> {\n    return ({ type } = { type: defaultType }) => values[type];\n}\n\nfunction buildMatchFn(patterns:IDateFnsLocaleValues, defaultType:string):DateFnsHelper<string, RegExpMatchArray | null> {\n    return (dirtyString, { type } = { type: defaultType }) =>\n        dirtyString.match(`^(${patterns[type].join(\"|\")})`);\n}\n\nfunction buildParseFn(patterns:IDateFnsLocaleValues, defaultType:string):DateFnsHelper<RegExpMatchArray, number> {\n    return ([, result], { type } = { type: defaultType }) =>\n        (patterns[type] || patterns[defaultType])\n            .map(p => new RegExp(`^${p}`))\n            .findIndex(pattern => pattern.test(result));\n}\n\nexport class DateFnsParser {\n    private _weekStartsOn:DateFnsWeekStartsOn;\n    private _locale:IDateFnsCustomLocale;\n\n    private get _config():any {\n        return {\n            weekStartsOn: this._weekStartsOn,\n            locale: this._locale\n        };\n    }\n\n    constructor(locale:IDatepickerLocaleValues) {\n        this._weekStartsOn = locale.firstDayOfWeek as DateFnsWeekStartsOn;\n\n        const weekdayValues = {\n            long: locale.weekdays,\n            short: locale.weekdaysShort,\n            narrow: locale.weekdaysNarrow\n        };\n\n        const monthValues = {\n            long: locale.months,\n            short: locale.monthsShort\n        };\n\n        this._locale = defaultLocale as any;\n        this._locale.localize = {\n            ...this._locale.localize,\n            ...{\n                weekday: buildLocalizeFn(weekdayValues, \"long\"),\n                weekdays: buildLocalizeArrayFn(weekdayValues, \"long\"),\n                month: buildLocalizeFn(monthValues, \"long\"),\n                months: buildLocalizeArrayFn(monthValues, \"long\")\n            }\n        };\n        this._locale.match = {\n            ...this._locale.match,\n            ...{\n                weekdays: buildMatchFn(weekdayValues, \"long\"),\n                weekday: buildParseFn(weekdayValues, \"long\"),\n                months: buildMatchFn(monthValues, \"long\"),\n                month: buildParseFn(monthValues, \"long\")\n            }\n        };\n    }\n\n    public format(d:Date, f:string):string {\n        return format(d, f, this._config);\n    }\n\n    public parse(dS:string, f:string, bD:Date):Date {\n        return parse(dS, f, bD, this._config);\n    }\n}\n"]}